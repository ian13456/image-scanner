{"version":3,"sources":["components/BottomNav/BottomNav.js","core/Matrix.worker.js","core/ImageScanner.js","components/Canvas/Canvas.js","core/Result.js","components/Result/Result.js","containers/App.js","utils/serviceWorker.js","index.js"],"names":["className","worker","undefined","__webpack_public_path__","ImageScanner","setup","container","image","terminate","x","offsetWidth","y","offsetHeight","scale","mousePressed","sketch","p","preload","background","loadImage","myCanvas","createCanvas","elt","addEventListener","e","preventDefault","parent","imageMode","CENTER","draw","imgWidth","width","imgHeight","height","clear","points","forEach","noStroke","fill","rectMode","rect","mouseX","mouseY","pointIndex","findIndex","px","py","mouseButton","RIGHT","reactRemovePoint","LEFT","isPinning","reactAddPoint","startX","startY","mouseReleased","mouseDragged","diffX","diffY","mouseWheel","delta","windowResized","resizeCanvas","p5instance","p5","setPinning","style","cursor","setAddPoint","func","setRemovePoint","setPoints","project","a","Promise","resolve","matrixWorker","MatrixWorker","postMessage","onmessage","matrix","data","coeffsInv","loadPixels","img","createImage","Math","floor","i","j","srcP","transformInverse","color","get","set","updatePixels","coordinates","remove","this","setImage","setResult","mount","useRef","inputRef","scannerRef","useState","setIsPinning","onImageInput","target","files","reader","FileReader","onload","result","readAsDataURL","addPoint","useCallback","newPoints","length","removePoint","index","splice","useEffect","current","enabled","document","body","key","ref","onClick","click","type","accept","hidden","onChange","UploadIcon","size","Paragraph","textAlign","marginTop","Button","iconAfter","PlusIcon","appearance","intent","marginRight","disabled","PrintIcon","Result","WEBGL","noFill","resultRef","App","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"oMAIe,G,YAAA,WACb,OAAO,yBAAKA,UAAU,sBAAf,uB,gICFM,aACb,OAAOC,IAAO,i/KAAohL,cAAUC,EAAWC,IAA0B,+CCC9jLC,E,4DACnBC,MAAQ,SAACC,EAAWC,GAClB,EAAKC,YAEL,EAAKF,UAAYA,EAEjB,EAAKG,EAAIH,EAAUI,YAAc,EACjC,EAAKC,EAAIL,EAAUM,aAAe,EAClC,EAAKC,MAAQ,EAEb,EAAKC,cAAe,EAEpB,EAAKC,OAAS,SAACC,GACRT,IAELS,EAAEC,QAAU,WACV,EAAKC,WAAaF,EAAEG,UAAUZ,IAGhCS,EAAEX,MAAQ,WACR,IAAMe,EAAWJ,EAAEK,aACjBf,EAAUI,YACVJ,EAAUM,cAGZQ,EAASE,IAAIC,iBAAiB,eAAe,SAACC,GAAD,OAAOA,EAAEC,oBAEtDL,EAASM,OAAOpB,GAChBU,EAAEW,UAAUX,EAAEY,SAGhBZ,EAAEa,KAAO,WACP,IAAMC,EAAW,EAAKZ,WAAWa,MAAQ,EAAKlB,MACxCmB,EAAY,EAAKd,WAAWe,OAAS,EAAKpB,MAEhDG,EAAEkB,QACFlB,EAAET,MAAM,EAAKW,WAAY,EAAKT,EAAG,EAAKE,EAAGmB,EAAUE,GAEnD,EAAKG,OAAOC,SAAQ,YAAe,IAAZ3B,EAAW,EAAXA,EAAGE,EAAQ,EAARA,EACxBK,EAAEqB,WACFrB,EAAEsB,KAAK,WACPtB,EAAEuB,SAASvB,EAAEY,QACbZ,EAAEwB,KACA,EAAK/B,EAAIA,EAAI,EAAKI,MAAQiB,EAAW,EACrC,EAAKnB,EAAIA,EAAI,EAAKE,MAAQmB,EAAY,EA9C3B,GA+CM,EAAKnB,MA/CX,GAgDM,EAAKA,WAK5BG,EAAEF,aAAe,WACf,KACEE,EAAEyB,OAAS,GACXzB,EAAEyB,OAASzB,EAAEe,OACbf,EAAE0B,OAAS,GACX1B,EAAE0B,OAAS1B,EAAEiB,QAJf,CAOA,IAAMxB,GAAKO,EAAEyB,OAAS,EAAKhC,GAAK,EAAKI,MAAQ,EAAKK,WAAWa,MAAQ,EAC/DpB,GAAKK,EAAE0B,OAAS,EAAK/B,GAAK,EAAKE,MAAQ,EAAKK,WAAWe,OAAS,EAEhEU,EAAa,EAAKR,OAAOS,WAC7B,gBAAMC,EAAN,EAAGpC,EAAUqC,EAAb,EAAUnC,EAAV,OACEF,GAAKoC,EAlEM,GAkEiB,EAAKhC,MAAS,GAC1CJ,GAAKoC,EAnEM,GAmEiB,EAAKhC,MAAS,GAC1CF,GAAKmC,EApEM,GAoEiB,EAAKjC,MAAS,GAC1CF,GAAKmC,EArEM,GAqEiB,EAAKjC,MAAS,KAE1CG,EAAE+B,cAAgB/B,EAAEgC,QAAyB,IAAhBL,EAC/B,EAAKM,iBAAiBN,GACb3B,EAAE+B,cAAgB/B,EAAEkC,MAAQ,EAAKC,WAExC1C,GAAK,GACLA,GAAK,EAAKS,WAAWa,OACrBpB,GAAK,GACLA,GAAK,EAAKO,WAAWe,QAErB,EAAKmB,cAAc3C,EAAGE,GAI1B,EAAK0C,OAASrC,EAAEyB,OAChB,EAAKa,OAAStC,EAAE0B,OAEhB,EAAK5B,cAAe,IAGtBE,EAAEuC,cAAgB,WAChB,EAAKzC,cAAe,GAGtBE,EAAEwC,aAAe,WACf,IAAI,EAAKL,WAAc,EAAKrC,gBAE1BE,EAAEyB,OAAS,GACXzB,EAAEyB,OAASzB,EAAEe,OACbf,EAAE0B,OAAS,GACX1B,EAAE0B,OAAS1B,EAAEiB,QAJf,CAOA,IAAMwB,EAAQ,EAAKJ,OAASrC,EAAEyB,OACxBiB,EAAQ,EAAKJ,OAAStC,EAAE0B,OAE9B,EAAKjC,GAAKgD,EACV,EAAK9C,GAAK+C,EAEV,EAAKL,OAASrC,EAAEyB,OAChB,EAAKa,OAAStC,EAAE0B,SAGlB1B,EAAE2C,WAAa,SAACnC,GACd,IAAI,EAAK2B,aAEPnC,EAAEyB,OAAS,GACXzB,EAAEyB,OAASzB,EAAEe,OACbf,EAAE0B,OAAS,GACX1B,EAAE0B,OAAS1B,EAAEiB,QAJf,CAFoB,IASZ2B,EAAUpC,EAAVoC,MACR,EAAK/C,OAAS+C,EAAQ,MAGxB5C,EAAE6C,cAAgB,WAChB7C,EAAE8C,aAAaxD,EAAUI,YAAaJ,EAAUM,iBAIpD,EAAKmD,WAAa,IAAIC,IAAG,EAAKjD,S,KAGhCkD,WAAa,SAACd,GACP,EAAKY,aAEV,EAAKzD,UAAU4D,MAAMC,OAAShB,EAAY,YAAc,OACxD,EAAKA,UAAYA,I,KAGnBiB,YAAc,SAACC,GAAD,OAAW,EAAKjB,cAAgBiB,G,KAE9CC,eAAiB,SAACD,GAAD,OAAW,EAAKpB,iBAAmBoB,G,KAEpDE,UAAY,SAACpC,GAAD,OAAa,EAAKA,OAASA,G,KAEvCqC,Q,sBAAU,4CAAAC,EAAA,sEAOF,IAAIC,SAAQ,SAACC,GACjB,IAAMC,EAAe,IAAIC,EAEzBD,EAAaE,YAAY,CACvB3C,OAAQ,EAAKA,OACbjB,WAAY,CACVa,MAAO,EAAKb,WAAWa,MACvBE,OAAQ,EAAKf,WAAWe,UAI5B2C,EAAaG,UAAY,SAACvD,GACxBwD,EAASxD,EAAEyD,KAAKD,OAChBjD,EAAQP,EAAEyD,KAAKlD,MACfE,EAAST,EAAEyD,KAAKhD,OAChB0C,QAtBI,OAmCR,IATQO,EAAcF,EAAdE,UAER,EAAKhE,WAAWiE,cACVC,EAAM,EAAKrB,WAAWsB,YAC1BC,KAAKC,MAAMxD,GACXuD,KAAKC,MAAMtD,KAETkD,aAEKK,EAAI,EAAGA,EAAIJ,EAAIrD,MAAOyD,IAC7B,IAASC,EAAI,EAAGA,EAAIL,EAAInD,OAAQwD,IACxBC,EAAO,EAAKC,iBAAiBH,EAAGC,EAAGP,GACnCU,EAAQ,EAAK1E,WAAW2E,IAC5BP,KAAKC,MAAMG,EAAKjF,GAChB6E,KAAKC,MAAMG,EAAK/E,IAElByE,EAAIU,IAAIN,EAAGC,EAAGG,GA1CV,OA8CRR,EAAIW,eA9CI,kBAgDDX,GAhDC,2C,KAmDVO,iBAAmB,SAAClF,EAAGE,EAAGuE,GACxB,IAAIc,EAAc,GAOlB,OANAA,EAAYvF,GACTyE,EAAU,GAAKzE,EAAIyE,EAAU,GAAKvE,EAAIuE,EAAU,KAChDA,EAAU,GAAKzE,EAAIyE,EAAU,GAAKvE,EAAI,GACzCqF,EAAYrF,GACTuE,EAAU,GAAKzE,EAAIyE,EAAU,GAAKvE,EAAIuE,EAAU,KAChDA,EAAU,GAAKzE,EAAIyE,EAAU,GAAKvE,EAAI,GAClCqF,G,KAGTxF,UAAY,WACN,EAAKuD,YACP,EAAKA,WAAWkC,U,oDAKlB,QAASC,KAAKnC,e,KC5MH,G,MAAA,YAAqC,IAAlCxD,EAAiC,EAAjCA,MAAO4F,EAA0B,EAA1BA,SAAUC,EAAgB,EAAhBA,UAC3BC,EAAQC,iBAAO,MACfC,EAAWD,iBAAO,MAClBE,EAAaF,iBAAO,IAAIlG,GAHmB,EAIfqG,oBAAS,GAJM,mBAI1CtD,EAJ0C,KAI/BuD,EAJ+B,OAKrBD,mBAAS,IALY,mBAK1CtE,EAL0C,KAKlCoC,EALkC,KAO3CoC,EAAY,uCAAG,WAAOnF,GAAP,eAAAiD,EAAA,sDACfjD,EAAEoF,OAAOC,OAASrF,EAAEoF,OAAOC,MAAM,MAC7BC,EAAS,IAAIC,YAEZC,OAAS,SAAUxF,GACxB2E,GAAS,kBAAM3E,EAAEoF,OAAOK,WAG1BH,EAAOI,cAAc1F,EAAEoF,OAAOC,MAAM,KARnB,2CAAH,sDAYZM,EAAWC,uBACf,SAAC3G,EAAGE,GACF,IAAM0G,EAAS,sBAAOlF,GAAP,CAAe,CAAE1B,IAAGE,OACnC4D,GAAU,kBAAM8C,KAxBH,IA0BTA,EAAUC,QACZZ,GAAa,KAGjB,CAACvE,IAGGoF,EAAcH,uBAClB,SAACI,GACC,IAAMH,EAAS,YAAOlF,GACtBkF,EAAUI,OAAOD,EAAO,GACxBjD,GAAU,kBAAM8C,KAChBX,GAAa,KAEf,CAACvE,IA8BH,OA3BAuF,qBAAU,YACHlB,EAAWmB,QAAQC,SAAWrH,GACjCiG,EAAWmB,QAAQtH,MAAMgG,EAAMsB,QAASpH,KACzC,CAAC8F,EAAO9F,IAEXmH,qBAAU,WACRlB,EAAWmB,QAAQvD,YAAY+C,KAC9B,CAACA,IAEJO,qBAAU,WACRlB,EAAWmB,QAAQrD,eAAeiD,KACjC,CAACA,IAEJG,qBAAU,WACRlB,EAAWmB,QAAQpD,UAAUpC,KAC5B,CAACA,IAEJuF,qBAAU,WACRlB,EAAWmB,QAAQ1D,WAAWd,KAC7B,CAAC5C,EAAO4C,IAEXuE,qBAAU,WACRG,SAASC,KAAKvG,iBAAiB,WAAW,SAACC,GAC3B,WAAVA,EAAEuG,KAAkBrB,GAAa,SAKvC,yBAAK1G,UAAU,kBACb,yBACEA,UAAU,cACVgI,IAAK3B,EACL4B,QAAS,WACH1H,GACJgG,EAASoB,QAAQO,UAGnB,2BACEF,IAAKzB,EACL4B,KAAK,OACLC,OAAO,wBACPC,QAAM,EACNC,SAAU3B,KAEVH,EAAWmB,QAAQC,SACnB,oCACE,kBAACW,EAAA,EAAD,CAAYC,KAAM,IAAK5C,MAAM,cAC7B,kBAAC6C,EAAA,EAAD,CAAW7C,MAAM,YAAY8C,UAAU,SAASC,UAAW,IAA3D,2BAMN,yBAAK3I,UAAU,kBACb,kBAAC4I,EAAA,EAAD,CACEC,UAAWC,IACXC,WAAW,UACXC,OAAO,UACPC,YAAa,EACbC,UAAW3I,GAtGF,IAsGW4B,EAAOmF,OAC3BrF,OAAQ,GACRgG,QAAS,kBAAMvB,GAAcvD,KAE5BA,GA1GQ,IA0GoBhB,EAAOmF,OAClC,6CA3GO,EA2GyBnF,EAAOmF,OAAvC,KAEA,6CA7GO,EA6GyBnF,EAAOmF,OAAvC,MAGJ,kBAACsB,EAAA,EAAD,CACEG,WAAW,UACXC,OAAO,SACPE,SAnHS,IAmHC/G,EAAOmF,OACjBrF,OAAQ,GACR4G,UAAWM,IACXlB,QAAO,sBAAE,sBAAAxD,EAAA,kEAAY2B,EAAZ,SAA4BI,EAAWmB,QAAQnD,UAA/C,wGANX,eC3Ha4E,E,iDACnB/I,MAAQ,SAACC,EAAWC,GAClB,EAAKC,YAEL,EAAKC,EAAI,EACT,EAAKE,EAAI,EACT,EAAKE,MAAQ,EACb,EAAKK,WAAaX,EAElB,EAAKO,cAAe,EAEpB,EAAKC,OAAS,SAACC,GACRT,IAEL,EAAKW,WAAaX,EAElBS,EAAEX,MAAQ,WACSW,EAAEK,aACjBf,EAAUI,YACVJ,EAAUM,aACVI,EAAEqI,OAGK3H,OAAOpB,GAChBU,EAAEW,UAAUX,EAAEY,QACdZ,EAAEsI,UAGJtI,EAAEa,KAAO,WACF,EAAKX,aAEVF,EAAEkB,QACFlB,EAAET,MACA,EAAKW,WACL,EAAKT,EACL,EAAKE,EACL,EAAKO,WAAWa,MAAQ,EAAKlB,MAC7B,EAAKK,WAAWe,OAAS,EAAKpB,SAIlCG,EAAEF,aAAe,WAEbE,EAAEyB,OAAS,GACXzB,EAAEyB,OAASzB,EAAEe,OACbf,EAAE0B,OAAS,GACX1B,EAAE0B,OAAS1B,EAAEiB,SAIf,EAAKoB,OAASrC,EAAEyB,OAChB,EAAKa,OAAStC,EAAE0B,OAEhB,EAAK5B,cAAe,IAGtBE,EAAEuC,cAAgB,WAChB,EAAKzC,cAAe,GAGtBE,EAAEwC,aAAe,WACf,GAAK,EAAK1C,gBAERE,EAAEyB,OAAS,GACXzB,EAAEyB,OAASzB,EAAEe,OACbf,EAAE0B,OAAS,GACX1B,EAAE0B,OAAS1B,EAAEiB,QAJf,CAQA,IAAMwB,EAAQ,EAAKJ,OAASrC,EAAEyB,OACxBiB,EAAQ,EAAKJ,OAAStC,EAAE0B,OAE9B,EAAKjC,GAAKgD,EACV,EAAK9C,GAAK+C,EAEV,EAAKL,OAASrC,EAAEyB,OAChB,EAAKa,OAAStC,EAAE0B,SAGlB1B,EAAE2C,WAAa,SAACnC,GACd,KACER,EAAEyB,OAAS,GACXzB,EAAEyB,OAASzB,EAAEe,OACbf,EAAE0B,OAAS,GACX1B,EAAE0B,OAAS1B,EAAEiB,QAJf,CADoB,IAQZ2B,EAAUpC,EAAVoC,MACR,EAAK/C,OAAS+C,EAAQ,MAGxB5C,EAAE6C,cAAgB,WAChB7C,EAAE8C,aAAaxD,EAAUI,YAAaJ,EAAUM,iBAIpD,EAAKmD,WAAa,IAAIC,IAAG,EAAKjD,S,KAGhCP,UAAY,WACN,EAAKuD,YACP,EAAKA,WAAWkC,WClGP,G,OAAA,YAAiB,IAAdgB,EAAa,EAAbA,OACVZ,EAAQC,iBAAO,MACfiD,EAAYjD,iBAAO,IAAI8C,GAM7B,OAJA1B,qBAAU,WACJT,GAAQsC,EAAU5B,QAAQtH,MAAMgG,EAAMsB,QAASV,KAClD,CAACZ,EAAOY,IAGT,yBAAKjH,UAAU,kBACb,yBAAKA,UAAU,cAAcgI,IAAK3B,OCOzBmD,MAff,WAAgB,IAAD,EACa/C,mBAAS,IADtB,mBACNlG,EADM,KACC4F,EADD,OAEeM,mBAAS,MAFxB,mBAENQ,EAFM,KAEEb,EAFF,KAIb,OACE,yBAAKpG,UAAU,eACb,yBAAKA,UAAU,eACb,kBAAC,EAAD,CAAQO,MAAOA,EAAO4F,SAAUA,EAAUC,UAAWA,IACrD,kBAAC,EAAD,CAAQa,OAAQA,KAElB,kBAAC,EAAD,QCNcwC,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCZNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFnC,SAASoC,eAAe,SDyHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAACC,GACLA,EAAaC,gBAEdC,OAAM,SAACC,GACNC,QAAQD,MAAMA,EAAME,a","file":"static/js/main.1c1fca82.chunk.js","sourcesContent":["import React from 'react'\n\nimport './BottomNav.scss'\n\nexport default () => {\n  return <nav className=\"bottom-nav-wrapper\">made by Ian Huang</nav>\n}\n","\nimport worker from \"!!../../node_modules/worker-loader/dist/runtime/inline.js\";\n\nexport default function() {\n  return worker(\"!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){\\\"undefined\\\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(t,\\\"__esModule\\\",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&\\\"object\\\"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,\\\"default\\\",{enumerable:!0,value:t}),2&r&&\\\"string\\\"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,\\\"a\\\",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p=\\\"/image-scanner/\\\",e(e.s=1)}([function(t,r,e){var n,o,f;!function(t){if(!t.numeric){var r={dim:function(t){var e;return\\\"object\\\"===typeof t?\\\"object\\\"===typeof(e=t[0])?\\\"object\\\"===typeof e[0]?r._dim(t):[t.length,e.length]:[t.length]:[]},_foreach2:function t(r,e,n,o){if(n===e.length-1)return o(r);var f,i=e[n],s=Array(i);for(f=i-1;f>=0;f--)s[f]=t(r[f],e,n+1,o);return s},cloneV:function(t){var r,e=t.length,n=Array(e);for(r=e-1;-1!==r;--r)n[r]=t[r];return n},clone:function(t){if(\\\"object\\\"!==typeof t)return t;var e=r.cloneV,n=r.dim(t);return r._foreach2(t,n,0,e)},diag:function(t){var r,e,n,o,f=t.length,i=Array(f);for(r=f-1;r>=0;r--){for(o=Array(f),e=r+2,n=f-1;n>=e;n-=2)o[n]=0,o[n-1]=0;for(n>r&&(o[n]=0),o[r]=t[r],n=r-1;n>=1;n-=2)o[n]=0,o[n-1]=0;0===n&&(o[0]=0),i[r]=o}return i},rep:function(t,e,n){\\\"undefined\\\"===typeof n&&(n=0);var o,f=t[n],i=Array(f);if(n===t.length-1){for(o=f-2;o>=0;o-=2)i[o+1]=e,i[o]=e;return-1===o&&(i[0]=e),i}for(o=f-1;o>=0;o--)i[o]=r.rep(t,e,n+1);return i},identity:function(t){return r.diag(r.rep([t],1))},inv:function(t){var e,n,o,f,i,s,c,u,a=r.dim(t),h=Math.abs,d=a[0],l=a[1],y=r.clone(t),p=r.identity(d);for(s=0;s<l;++s){var v=-1,m=-1;for(i=s;i!==d;++i)(c=h(y[i][s]))>m&&(v=i,m=c);for(n=y[v],y[v]=y[s],y[s]=n,f=p[v],p[v]=p[s],p[s]=f,u=n[s],c=s;c!==l;++c)n[c]/=u;for(c=l-1;-1!==c;--c)f[c]/=u;for(i=d-1;-1!==i;--i)if(i!==s){for(e=y[i],o=p[i],u=e[s],c=s+1;c!==l;++c)e[c]-=n[c]*u;for(c=l-1;c>0;--c)o[c]-=f[c]*u,o[--c]-=f[c]*u;0===c&&(o[0]-=f[0]*u)}}return p},dotMMsmall:function(t,r){var e,n,o,f,i,s,c,u,a,h,d;for(f=t.length,i=r.length,s=r[0].length,c=Array(f),e=f-1;e>=0;e--){for(u=Array(s),a=t[e],o=s-1;o>=0;o--){for(h=a[i-1]*r[i-1][o],n=i-2;n>=1;n-=2)d=n-1,h+=a[n]*r[n][o]+a[d]*r[d][o];0===n&&(h+=a[0]*r[0][o]),u[o]=h}c[e]=u}return c},dotMV:function(t,e){var n,o=t.length,f=Array(o),i=r.dotVV;for(n=o-1;n>=0;n--)f[n]=i(t[n],e);return f},dotVV:function(t,r){var e,n,o=t.length,f=t[o-1]*r[o-1];for(e=o-2;e>=1;e-=2)n=e-1,f+=t[e]*r[e]+t[n]*r[n];return 0===e&&(f+=t[0]*r[0]),f},transpose:function(t){var r,e,n,o,f,i=t.length,s=t[0].length,c=Array(s);for(e=0;e<s;e++)c[e]=Array(i);for(r=i-1;r>=1;r-=2){for(o=t[r],n=t[r-1],e=s-1;e>=1;--e)(f=c[e])[r]=o[e],f[r-1]=n[e],(f=c[--e])[r]=o[e],f[r-1]=n[e];0===e&&((f=c[0])[r]=o[0],f[r-1]=n[0])}if(0===r){for(n=t[0],e=s-1;e>=1;--e)c[e][0]=n[e],c[--e][0]=n[e];0===e&&(c[0][0]=n[0])}return c}};this.numeric=r,t.numeric=r}}(this),f=function(){\\\"use strict\\\";function t(t,r,e){if(e){var n=r;r=t,t=n}var o,f=[[t[0],t[1],1,0,0,0,-1*r[0]*t[0],-1*r[0]*t[1]],[0,0,0,t[0],t[1],1,-1*r[1]*t[0],-1*r[1]*t[1]],[t[2],t[3],1,0,0,0,-1*r[2]*t[2],-1*r[2]*t[3]],[0,0,0,t[2],t[3],1,-1*r[3]*t[2],-1*r[3]*t[3]],[t[4],t[5],1,0,0,0,-1*r[4]*t[4],-1*r[4]*t[5]],[0,0,0,t[4],t[5],1,-1*r[5]*t[4],-1*r[5]*t[5]],[t[6],t[7],1,0,0,0,-1*r[6]*t[6],-1*r[6]*t[7]],[0,0,0,t[6],t[7],1,-1*r[7]*t[6],-1*r[7]*t[7]]],i=r;try{o=numeric.inv(numeric.dotMMsmall(numeric.transpose(f),f))}catch(h){return console.log(h),[1,0,0,0,1,0,0,0]}for(var s,c=numeric.dotMMsmall(o,numeric.transpose(f)),u=numeric.dotMV(c,i),a=0;a<u.length;a++)u[a]=(s=u[a],Math.round(1e10*s)/1e10);return u[8]=1,u}function r(e,n){return\\\"undefined\\\"!==typeof window&&window===this||void 0===this?new r(e,n):(this.srcPts=e,this.dstPts=n,this.coeffs=t(this.srcPts,this.dstPts,!1),this.coeffsInv=t(this.srcPts,this.dstPts,!0),this)}return r.prototype={transform:function(t,r){var e=[];return e[0]=(this.coeffs[0]*t+this.coeffs[1]*r+this.coeffs[2])/(this.coeffs[6]*t+this.coeffs[7]*r+1),e[1]=(this.coeffs[3]*t+this.coeffs[4]*r+this.coeffs[5])/(this.coeffs[6]*t+this.coeffs[7]*r+1),e},transformInverse:function(t,r){var e=[];return e[0]=(this.coeffsInv[0]*t+this.coeffsInv[1]*r+this.coeffsInv[2])/(this.coeffsInv[6]*t+this.coeffsInv[7]*r+1),e[1]=(this.coeffsInv[3]*t+this.coeffsInv[4]*r+this.coeffsInv[5])/(this.coeffsInv[6]*t+this.coeffsInv[7]*r+1),e}},r},void 0!==typeof t?t.exports=f():void 0===(o=\\\"function\\\"===typeof(n=f)?n.call(r,e,r,t):n)||(t.exports=o)},function(t,r,e){\\\"use strict\\\";e.r(r);var n=e(0),o=e.n(n);self.onmessage=function(t){const{points:r,background:{width:e,height:n}}=t.data,f=r.map(t=>({d:Math.sqrt(t.x**2+t.y**2),p:t})).sort((t,r)=>t.d-r.d)[0].p,i=r.map(t=>({d:Math.sqrt((t.x-e)**2+t.y**2),p:t})).sort((t,r)=>t.d-r.d)[0].p,s=r.map(t=>({d:Math.sqrt(t.x**2+(t.y-n)**2),p:t})).sort((t,r)=>t.d-r.d)[0].p,c=r.map(t=>({d:Math.sqrt((t.x-e)**2+(t.y-n)**2),p:t})).sort((t,r)=>t.d-r.d)[0].p,u=(Math.sqrt((f.x-i.x)**2+(f.y-i.y)**2)+Math.sqrt((c.x-s.x)**2+(c.y-s.y)**2))/2,a=(Math.sqrt((f.x-s.x)**2+(f.y-s.y)**2)+Math.sqrt((c.x-i.x)**2+(c.y-i.y)**2))/2,h=[f.x,f.y,i.x,i.y,c.x,c.y,s.x,s.y],d=[0,0,u,0,u,a,0,a],l=o()(h,d);self.postMessage({matrix:l,width:u,height:a})}}]);\\n//# sourceMappingURL=Matrix.worker.80242c70.worker.js.map\", \"Worker\", undefined, __webpack_public_path__ + \"static/js/Matrix.worker.80242c70.worker.js\");\n}\n","import p5 from 'p5'\nimport MatrixWorker from './Matrix.worker'\n\nconst POINT_DIAMETER = 10\n\nexport default class ImageScanner {\n  setup = (container, image) => {\n    this.terminate()\n\n    this.container = container\n\n    this.x = container.offsetWidth / 2\n    this.y = container.offsetHeight / 2\n    this.scale = 1\n\n    this.mousePressed = false\n\n    this.sketch = (p) => {\n      if (!image) return\n\n      p.preload = () => {\n        this.background = p.loadImage(image)\n      }\n\n      p.setup = () => {\n        const myCanvas = p.createCanvas(\n          container.offsetWidth,\n          container.offsetHeight\n        )\n\n        myCanvas.elt.addEventListener('contextmenu', (e) => e.preventDefault())\n\n        myCanvas.parent(container)\n        p.imageMode(p.CENTER)\n      }\n\n      p.draw = () => {\n        const imgWidth = this.background.width * this.scale\n        const imgHeight = this.background.height * this.scale\n\n        p.clear()\n        p.image(this.background, this.x, this.y, imgWidth, imgHeight)\n\n        this.points.forEach(({ x, y }) => {\n          p.noStroke()\n          p.fill('#e84a5f')\n          p.rectMode(p.CENTER)\n          p.rect(\n            this.x + x * this.scale - imgWidth / 2,\n            this.y + y * this.scale - imgHeight / 2,\n            POINT_DIAMETER * this.scale,\n            POINT_DIAMETER * this.scale\n          )\n        })\n      }\n\n      p.mousePressed = () => {\n        if (\n          p.mouseX < 0 ||\n          p.mouseX > p.width ||\n          p.mouseY < 0 ||\n          p.mouseY > p.height\n        )\n          return\n        const x = (p.mouseX - this.x) / this.scale + this.background.width / 2\n        const y = (p.mouseY - this.y) / this.scale + this.background.height / 2\n\n        const pointIndex = this.points.findIndex(\n          ({ x: px, y: py }) =>\n            x >= px - (POINT_DIAMETER * this.scale) / 2 &&\n            x <= px + (POINT_DIAMETER * this.scale) / 2 &&\n            y >= py - (POINT_DIAMETER * this.scale) / 2 &&\n            y <= py + (POINT_DIAMETER * this.scale) / 2\n        )\n        if (p.mouseButton === p.RIGHT && pointIndex !== -1) {\n          this.reactRemovePoint(pointIndex)\n        } else if (p.mouseButton === p.LEFT && this.isPinning) {\n          if (\n            x >= 0 &&\n            x <= this.background.width &&\n            y >= 0 &&\n            y <= this.background.height\n          ) {\n            this.reactAddPoint(x, y)\n          }\n        }\n\n        this.startX = p.mouseX\n        this.startY = p.mouseY\n\n        this.mousePressed = true\n      }\n\n      p.mouseReleased = () => {\n        this.mousePressed = false\n      }\n\n      p.mouseDragged = () => {\n        if (this.isPinning || !this.mousePressed) return\n        if (\n          p.mouseX < 0 ||\n          p.mouseX > p.width ||\n          p.mouseY < 0 ||\n          p.mouseY > p.height\n        )\n          return\n        const diffX = this.startX - p.mouseX\n        const diffY = this.startY - p.mouseY\n\n        this.x -= diffX\n        this.y -= diffY\n\n        this.startX = p.mouseX\n        this.startY = p.mouseY\n      }\n\n      p.mouseWheel = (e) => {\n        if (this.isPinning) return\n        if (\n          p.mouseX < 0 ||\n          p.mouseX > p.width ||\n          p.mouseY < 0 ||\n          p.mouseY > p.height\n        )\n          return\n        const { delta } = e\n        this.scale += delta / 1000\n      }\n\n      p.windowResized = () => {\n        p.resizeCanvas(container.offsetWidth, container.offsetHeight)\n      }\n    }\n\n    this.p5instance = new p5(this.sketch)\n  }\n\n  setPinning = (isPinning) => {\n    if (!this.p5instance) return\n\n    this.container.style.cursor = isPinning ? 'crosshair' : 'grab'\n    this.isPinning = isPinning\n  }\n\n  setAddPoint = (func) => (this.reactAddPoint = func)\n\n  setRemovePoint = (func) => (this.reactRemovePoint = func)\n\n  setPoints = (points) => (this.points = points)\n\n  project = async () => {\n    // const sortedPoints = this.points.sort(function (a, b) {\n    //   if (a.y === b.y) return a.x - b.x\n    //   return a.y - b.y\n    // })\n    let matrix, width, height\n\n    await new Promise((resolve) => {\n      const matrixWorker = new MatrixWorker()\n\n      matrixWorker.postMessage({\n        points: this.points,\n        background: {\n          width: this.background.width,\n          height: this.background.height\n        }\n      })\n\n      matrixWorker.onmessage = (e) => {\n        matrix = e.data.matrix\n        width = e.data.width\n        height = e.data.height\n        resolve()\n      }\n    })\n\n    const { coeffsInv } = matrix\n\n    this.background.loadPixels()\n    const img = this.p5instance.createImage(\n      Math.floor(width),\n      Math.floor(height)\n    )\n    img.loadPixels()\n\n    for (let i = 0; i < img.width; i++) {\n      for (let j = 0; j < img.height; j++) {\n        const srcP = this.transformInverse(i, j, coeffsInv)\n        const color = this.background.get(\n          Math.floor(srcP.x),\n          Math.floor(srcP.y)\n        )\n        img.set(i, j, color)\n      }\n    }\n\n    img.updatePixels()\n\n    return img\n  }\n\n  transformInverse = (x, y, coeffsInv) => {\n    var coordinates = {}\n    coordinates.x =\n      (coeffsInv[0] * x + coeffsInv[1] * y + coeffsInv[2]) /\n      (coeffsInv[6] * x + coeffsInv[7] * y + 1)\n    coordinates.y =\n      (coeffsInv[3] * x + coeffsInv[4] * y + coeffsInv[5]) /\n      (coeffsInv[6] * x + coeffsInv[7] * y + 1)\n    return coordinates\n  }\n\n  terminate = () => {\n    if (this.p5instance) {\n      this.p5instance.remove()\n    }\n  }\n\n  get enabled() {\n    return !!this.p5instance\n  }\n}\n","import {\n  Button,\n  Paragraph,\n  PlusIcon,\n  PrintIcon,\n  UploadIcon\n} from 'evergreen-ui'\nimport React, { useCallback, useEffect, useRef, useState } from 'react'\n\nimport ImageScanner from '../../core/ImageScanner'\n\nimport './Canvas.scss'\n\nconst MAX_POINTS = 4\n\nexport default ({ image, setImage, setResult }) => {\n  const mount = useRef(null)\n  const inputRef = useRef(null)\n  const scannerRef = useRef(new ImageScanner())\n  const [isPinning, setIsPinning] = useState(false)\n  const [points, setPoints] = useState([])\n\n  const onImageInput = async (e) => {\n    if (e.target.files && e.target.files[0]) {\n      const reader = new FileReader()\n\n      reader.onload = function (e) {\n        setImage(() => e.target.result)\n      }\n\n      reader.readAsDataURL(e.target.files[0])\n    }\n  }\n\n  const addPoint = useCallback(\n    (x, y) => {\n      const newPoints = [...points, { x, y }]\n      setPoints(() => newPoints)\n\n      if (newPoints.length === MAX_POINTS) {\n        setIsPinning(false)\n      }\n    },\n    [points]\n  )\n\n  const removePoint = useCallback(\n    (index) => {\n      const newPoints = [...points]\n      newPoints.splice(index, 1)\n      setPoints(() => newPoints)\n      setIsPinning(true)\n    },\n    [points]\n  )\n\n  useEffect(() => {\n    if (!scannerRef.current.enabled && image)\n      scannerRef.current.setup(mount.current, image)\n  }, [mount, image])\n\n  useEffect(() => {\n    scannerRef.current.setAddPoint(addPoint)\n  }, [addPoint])\n\n  useEffect(() => {\n    scannerRef.current.setRemovePoint(removePoint)\n  }, [removePoint])\n\n  useEffect(() => {\n    scannerRef.current.setPoints(points)\n  }, [points])\n\n  useEffect(() => {\n    scannerRef.current.setPinning(isPinning)\n  }, [image, isPinning])\n\n  useEffect(() => {\n    document.body.addEventListener('keydown', (e) => {\n      if (e.key === 'Escape') setIsPinning(false)\n    })\n  })\n\n  return (\n    <div className=\"canvas-wrapper\">\n      <div\n        className=\"canvas-main\"\n        ref={mount}\n        onClick={() => {\n          if (image) return\n          inputRef.current.click()\n        }}\n      >\n        <input\n          ref={inputRef}\n          type=\"file\"\n          accept=\"image/png, image/jpeg\"\n          hidden\n          onChange={onImageInput}\n        />\n        {!scannerRef.current.enabled && (\n          <>\n            <UploadIcon size={100} color=\"#dbe2ef77\" />\n            <Paragraph color=\"#959ba577\" textAlign=\"center\" marginTop={10}>\n              Click to upload image\n            </Paragraph>\n          </>\n        )}\n      </div>\n      <div className=\"canvas-toolbox\">\n        <Button\n          iconAfter={PlusIcon}\n          appearance=\"primary\"\n          intent=\"success\"\n          marginRight={8}\n          disabled={!image || points.length === MAX_POINTS}\n          height={40}\n          onClick={() => setIsPinning(!isPinning)}\n        >\n          {isPinning && MAX_POINTS !== points.length ? (\n            <span>Pinning... ({MAX_POINTS - points.length})</span>\n          ) : (\n            <span>Pin Points ({MAX_POINTS - points.length})</span>\n          )}\n        </Button>\n        <Button\n          appearance=\"primary\"\n          intent=\"danger\"\n          disabled={points.length !== MAX_POINTS}\n          height={40}\n          iconAfter={PrintIcon}\n          onClick={async () => setResult(await scannerRef.current.project())}\n        >\n          Flatten\n        </Button>\n      </div>\n    </div>\n  )\n}\n","import p5 from 'p5'\n\nexport default class Result {\n  setup = (container, image) => {\n    this.terminate()\n\n    this.x = 0\n    this.y = 0\n    this.scale = 1\n    this.background = image\n\n    this.mousePressed = false\n\n    this.sketch = (p) => {\n      if (!image) return\n\n      this.background = image\n\n      p.setup = () => {\n        const myCanvas = p.createCanvas(\n          container.offsetWidth,\n          container.offsetHeight,\n          p.WEBGL\n        )\n\n        myCanvas.parent(container)\n        p.imageMode(p.CENTER)\n        p.noFill()\n      }\n\n      p.draw = () => {\n        if (!this.background) return\n\n        p.clear()\n        p.image(\n          this.background,\n          this.x,\n          this.y,\n          this.background.width * this.scale,\n          this.background.height * this.scale\n        )\n      }\n\n      p.mousePressed = () => {\n        if (\n          p.mouseX < 0 ||\n          p.mouseX > p.width ||\n          p.mouseY < 0 ||\n          p.mouseY > p.height\n        )\n          return\n\n        this.startX = p.mouseX\n        this.startY = p.mouseY\n\n        this.mousePressed = true\n      }\n\n      p.mouseReleased = () => {\n        this.mousePressed = false\n      }\n\n      p.mouseDragged = () => {\n        if (!this.mousePressed) return\n        if (\n          p.mouseX < 0 ||\n          p.mouseX > p.width ||\n          p.mouseY < 0 ||\n          p.mouseY > p.height\n        )\n          return\n\n        const diffX = this.startX - p.mouseX\n        const diffY = this.startY - p.mouseY\n\n        this.x -= diffX\n        this.y -= diffY\n\n        this.startX = p.mouseX\n        this.startY = p.mouseY\n      }\n\n      p.mouseWheel = (e) => {\n        if (\n          p.mouseX < 0 ||\n          p.mouseX > p.width ||\n          p.mouseY < 0 ||\n          p.mouseY > p.height\n        )\n          return\n        const { delta } = e\n        this.scale += delta / 1000\n      }\n\n      p.windowResized = () => {\n        p.resizeCanvas(container.offsetWidth, container.offsetHeight)\n      }\n    }\n\n    this.p5instance = new p5(this.sketch)\n  }\n\n  terminate = () => {\n    if (this.p5instance) {\n      this.p5instance.remove()\n    }\n  }\n}\n","import React, { useEffect, useRef } from 'react'\n\nimport Result from '../../core/Result'\n\nimport './Result.scss'\n\nexport default ({ result }) => {\n  const mount = useRef(null)\n  const resultRef = useRef(new Result())\n\n  useEffect(() => {\n    if (result) resultRef.current.setup(mount.current, result)\n  }, [mount, result])\n\n  return (\n    <div className=\"result-wrapper\">\n      <div className=\"result-main\" ref={mount} />\n    </div>\n  )\n}\n","import React, { useState } from 'react'\n\nimport './App.scss'\n\nimport BottomNav from '../components/BottomNav/BottomNav'\nimport Canvas from '../components/Canvas/Canvas'\nimport Result from '../components/Result/Result'\n\nfunction App() {\n  const [image, setImage] = useState('')\n  const [result, setResult] = useState(null)\n\n  return (\n    <div className=\"app-wrapper\">\n      <div className=\"app-content\">\n        <Canvas image={image} setImage={setImage} setResult={setResult} />\n        <Result result={result} />\n      </div>\n      <BottomNav />\n    </div>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister()\n      })\n      .catch((error) => {\n        console.error(error.message)\n      })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport App from './containers/App'\nimport * as serviceWorker from './utils/serviceWorker'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}