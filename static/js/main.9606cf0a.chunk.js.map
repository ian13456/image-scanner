{"version":3,"sources":["components/BottomNav/BottomNav.js","core/Matrix.worker.js","core/ImageScanner.js","components/Canvas/Canvas.js","core/Result.js","components/Result/Result.js","containers/App.js","utils/serviceWorker.js","index.js"],"names":["className","worker","undefined","__webpack_public_path__","ImageScanner","setup","container","image","terminate","x","offsetWidth","y","offsetHeight","scale","mousePressed","sketch","p","preload","background","loadImage","myCanvas","createCanvas","elt","addEventListener","e","preventDefault","parent","imageMode","CENTER","draw","imgWidth","width","imgHeight","height","clear","push","points","forEach","point","mapPointToCanvas","mx","my","noStroke","fill","rectMode","rect","pop","length","getCornerPoints","topLeft","topRight","bottomLeft","bottomRight","p1","p2","p3","p4","stroke","strokeWeight","drawLine","text","Math","floor","mouseX","mouseY","pointIndex","findIndex","px","py","POINT_DIAMETER","mouseButton","RIGHT","reactRemovePoint","LEFT","isPinning","reactAddPoint","startX","startY","mouseReleased","mouseDragged","diffX","diffY","mouseWheel","delta","windowResized","resizeCanvas","p5instance","p5","setPinning","style","cursor","setAddPoint","func","setRemovePoint","setPoints","map","d","sqrt","sort","a","b","project","Promise","resolve","matrixWorker","MatrixWorker","postMessage","onmessage","matrix","data","coeffsInv","loadPixels","img","createImage","i","j","srcP","transformInverse","color","get","set","updatePixels","coordinates","line","remove","this","setImage","setResult","setLoading","mount","useRef","inputRef","scannerRef","useState","setIsPinning","onImageInput","target","files","reader","FileReader","onload","result","readAsDataURL","addPoint","useCallback","newPoints","removePoint","index","splice","useEffect","current","enabled","document","body","key","ref","onClick","click","type","accept","hidden","onChange","UploadIcon","size","Paragraph","textAlign","marginTop","Button","iconAfter","PlusIcon","appearance","intent","marginRight","disabled","PrintIcon","Result","WEBGL","noFill","resultRef","DownloadIcon","save","App","loading","visibility","opacity","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.9606cf0a.chunk.js","sourcesContent":["import React from 'react'\n\nimport './BottomNav.scss'\n\nexport default () => {\n  return <nav className=\"bottom-nav-wrapper\">made by Ian Huang</nav>\n}\n","\nimport worker from \"!!../../node_modules/worker-loader/dist/runtime/inline.js\";\n\nexport default function() {\n  return worker(\"!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){\\\"undefined\\\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(t,\\\"__esModule\\\",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&\\\"object\\\"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,\\\"default\\\",{enumerable:!0,value:t}),2&r&&\\\"string\\\"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,\\\"a\\\",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p=\\\"/image-scanner/\\\",e(e.s=1)}([function(t,r,e){var n,o,f;!function(t){if(!t.numeric){var r={dim:function(t){var e;return\\\"object\\\"===typeof t?\\\"object\\\"===typeof(e=t[0])?\\\"object\\\"===typeof e[0]?r._dim(t):[t.length,e.length]:[t.length]:[]},_foreach2:function t(r,e,n,o){if(n===e.length-1)return o(r);var f,i=e[n],s=Array(i);for(f=i-1;f>=0;f--)s[f]=t(r[f],e,n+1,o);return s},cloneV:function(t){var r,e=t.length,n=Array(e);for(r=e-1;-1!==r;--r)n[r]=t[r];return n},clone:function(t){if(\\\"object\\\"!==typeof t)return t;var e=r.cloneV,n=r.dim(t);return r._foreach2(t,n,0,e)},diag:function(t){var r,e,n,o,f=t.length,i=Array(f);for(r=f-1;r>=0;r--){for(o=Array(f),e=r+2,n=f-1;n>=e;n-=2)o[n]=0,o[n-1]=0;for(n>r&&(o[n]=0),o[r]=t[r],n=r-1;n>=1;n-=2)o[n]=0,o[n-1]=0;0===n&&(o[0]=0),i[r]=o}return i},rep:function(t,e,n){\\\"undefined\\\"===typeof n&&(n=0);var o,f=t[n],i=Array(f);if(n===t.length-1){for(o=f-2;o>=0;o-=2)i[o+1]=e,i[o]=e;return-1===o&&(i[0]=e),i}for(o=f-1;o>=0;o--)i[o]=r.rep(t,e,n+1);return i},identity:function(t){return r.diag(r.rep([t],1))},inv:function(t){var e,n,o,f,i,s,c,u,a=r.dim(t),h=Math.abs,l=a[0],d=a[1],y=r.clone(t),v=r.identity(l);for(s=0;s<d;++s){var p=-1,g=-1;for(i=s;i!==l;++i)(c=h(y[i][s]))>g&&(p=i,g=c);for(n=y[p],y[p]=y[s],y[s]=n,f=v[p],v[p]=v[s],v[s]=f,u=n[s],c=s;c!==d;++c)n[c]/=u;for(c=d-1;-1!==c;--c)f[c]/=u;for(i=l-1;-1!==i;--i)if(i!==s){for(e=y[i],o=v[i],u=e[s],c=s+1;c!==d;++c)e[c]-=n[c]*u;for(c=d-1;c>0;--c)o[c]-=f[c]*u,o[--c]-=f[c]*u;0===c&&(o[0]-=f[0]*u)}}return v},dotMMsmall:function(t,r){var e,n,o,f,i,s,c,u,a,h,l;for(f=t.length,i=r.length,s=r[0].length,c=Array(f),e=f-1;e>=0;e--){for(u=Array(s),a=t[e],o=s-1;o>=0;o--){for(h=a[i-1]*r[i-1][o],n=i-2;n>=1;n-=2)l=n-1,h+=a[n]*r[n][o]+a[l]*r[l][o];0===n&&(h+=a[0]*r[0][o]),u[o]=h}c[e]=u}return c},dotMV:function(t,e){var n,o=t.length,f=Array(o),i=r.dotVV;for(n=o-1;n>=0;n--)f[n]=i(t[n],e);return f},dotVV:function(t,r){var e,n,o=t.length,f=t[o-1]*r[o-1];for(e=o-2;e>=1;e-=2)n=e-1,f+=t[e]*r[e]+t[n]*r[n];return 0===e&&(f+=t[0]*r[0]),f},transpose:function(t){var r,e,n,o,f,i=t.length,s=t[0].length,c=Array(s);for(e=0;e<s;e++)c[e]=Array(i);for(r=i-1;r>=1;r-=2){for(o=t[r],n=t[r-1],e=s-1;e>=1;--e)(f=c[e])[r]=o[e],f[r-1]=n[e],(f=c[--e])[r]=o[e],f[r-1]=n[e];0===e&&((f=c[0])[r]=o[0],f[r-1]=n[0])}if(0===r){for(n=t[0],e=s-1;e>=1;--e)c[e][0]=n[e],c[--e][0]=n[e];0===e&&(c[0][0]=n[0])}return c}};this.numeric=r,t.numeric=r}}(this),f=function(){\\\"use strict\\\";function t(t,r,e){if(e){var n=r;r=t,t=n}var o,f=[[t[0],t[1],1,0,0,0,-1*r[0]*t[0],-1*r[0]*t[1]],[0,0,0,t[0],t[1],1,-1*r[1]*t[0],-1*r[1]*t[1]],[t[2],t[3],1,0,0,0,-1*r[2]*t[2],-1*r[2]*t[3]],[0,0,0,t[2],t[3],1,-1*r[3]*t[2],-1*r[3]*t[3]],[t[4],t[5],1,0,0,0,-1*r[4]*t[4],-1*r[4]*t[5]],[0,0,0,t[4],t[5],1,-1*r[5]*t[4],-1*r[5]*t[5]],[t[6],t[7],1,0,0,0,-1*r[6]*t[6],-1*r[6]*t[7]],[0,0,0,t[6],t[7],1,-1*r[7]*t[6],-1*r[7]*t[7]]],i=r;try{o=numeric.inv(numeric.dotMMsmall(numeric.transpose(f),f))}catch(h){return console.log(h),[1,0,0,0,1,0,0,0]}for(var s,c=numeric.dotMMsmall(o,numeric.transpose(f)),u=numeric.dotMV(c,i),a=0;a<u.length;a++)u[a]=(s=u[a],Math.round(1e10*s)/1e10);return u[8]=1,u}function r(e,n){return\\\"undefined\\\"!==typeof window&&window===this||void 0===this?new r(e,n):(this.srcPts=e,this.dstPts=n,this.coeffs=t(this.srcPts,this.dstPts,!1),this.coeffsInv=t(this.srcPts,this.dstPts,!0),this)}return r.prototype={transform:function(t,r){var e=[];return e[0]=(this.coeffs[0]*t+this.coeffs[1]*r+this.coeffs[2])/(this.coeffs[6]*t+this.coeffs[7]*r+1),e[1]=(this.coeffs[3]*t+this.coeffs[4]*r+this.coeffs[5])/(this.coeffs[6]*t+this.coeffs[7]*r+1),e},transformInverse:function(t,r){var e=[];return e[0]=(this.coeffsInv[0]*t+this.coeffsInv[1]*r+this.coeffsInv[2])/(this.coeffsInv[6]*t+this.coeffsInv[7]*r+1),e[1]=(this.coeffsInv[3]*t+this.coeffsInv[4]*r+this.coeffsInv[5])/(this.coeffsInv[6]*t+this.coeffsInv[7]*r+1),e}},r},void 0!==typeof t?t.exports=f():void 0===(o=\\\"function\\\"===typeof(n=f)?n.call(r,e,r,t):n)||(t.exports=o)},function(t,r,e){\\\"use strict\\\";e.r(r);var n=e(0),o=e.n(n);self.onmessage=function(t){const{points:{topLeft:r,topRight:e,bottomLeft:n,bottomRight:f}}=t.data,i=(Math.sqrt((r.x-e.x)**2+(r.y-e.y)**2)+Math.sqrt((f.x-n.x)**2+(f.y-n.y)**2))/2,s=(Math.sqrt((r.x-n.x)**2+(r.y-n.y)**2)+Math.sqrt((f.x-e.x)**2+(f.y-e.y)**2))/2,c=[r.x,r.y,e.x,e.y,f.x,f.y,n.x,n.y],u=[0,0,i,0,i,s,0,s],a=o()(c,u);self.postMessage({matrix:a,width:i,height:s})}}]);\\n//# sourceMappingURL=Matrix.worker.d843d03d.worker.js.map\", \"Worker\", undefined, __webpack_public_path__ + \"static/js/Matrix.worker.d843d03d.worker.js\");\n}\n","import p5 from 'p5'\nimport MatrixWorker from './Matrix.worker'\n\nconst POINT_DIAMETER = 10\n\nexport default class ImageScanner {\n  setup = (container, image) => {\n    this.terminate()\n\n    this.container = container\n\n    this.x = container.offsetWidth / 2\n    this.y = container.offsetHeight / 2\n    this.scale = 1\n\n    this.mousePressed = false\n\n    this.sketch = (p) => {\n      if (!image) return\n\n      p.preload = () => {\n        this.background = p.loadImage(image)\n      }\n\n      p.setup = () => {\n        const myCanvas = p.createCanvas(\n          container.offsetWidth,\n          container.offsetHeight\n        )\n\n        myCanvas.elt.addEventListener('contextmenu', (e) => e.preventDefault())\n\n        myCanvas.parent(container)\n        p.imageMode(p.CENTER)\n      }\n\n      p.draw = () => {\n        const imgWidth = this.background.width * this.scale\n        const imgHeight = this.background.height * this.scale\n\n        p.clear()\n        p.image(this.background, this.x, this.y, imgWidth, imgHeight)\n\n        p.push()\n        this.points.forEach((point) => {\n          const { x: mx, y: my } = this.mapPointToCanvas(point)\n\n          p.noStroke()\n          p.fill('#e84a5f')\n          p.rectMode(p.CENTER)\n          p.rect(mx, my, POINT_DIAMETER, POINT_DIAMETER)\n        })\n        p.pop()\n\n        // TODO: extract 4\n        p.push()\n        if (this.points.length === 4) {\n          const {\n            topLeft,\n            topRight,\n            bottomLeft,\n            bottomRight\n          } = this.getCornerPoints()\n\n          const p1 = this.mapPointToCanvas(topLeft)\n          const p2 = this.mapPointToCanvas(topRight)\n          const p3 = this.mapPointToCanvas(bottomLeft)\n          const p4 = this.mapPointToCanvas(bottomRight)\n\n          p.stroke('#e84a5f99')\n          p.strokeWeight(8)\n          this.drawLine(p, p1, p3)\n          this.drawLine(p, p2, p4)\n          this.drawLine(p, p1, p2)\n          this.drawLine(p, p3, p4)\n        }\n        p.pop()\n\n        p.push()\n        p.text(\n          `x: ${Math.floor(p.mouseX)}, y: ${Math.floor(p.mouseY)}`,\n          10,\n          p.height - 10\n        )\n        if (\n          p.mouseX >= this.x - imgWidth / 2 &&\n          p.mouseX <= this.x + imgWidth / 2 &&\n          p.mouseY >= this.y - imgHeight / 2 &&\n          p.mouseY <= this.y + imgHeight / 2\n        ) {\n          const mx =\n            (p.mouseX - this.x + (this.background.width * this.scale) / 2) /\n            this.scale\n          const my =\n            (p.mouseY - this.y + (this.background.height * this.scale) / 2) /\n            this.scale\n          p.text(\n            `img x: ${Math.floor(mx)}, img y: ${Math.floor(my)}`,\n            10,\n            p.height - 30\n          )\n        }\n        p.pop()\n      }\n\n      p.mousePressed = () => {\n        if (\n          p.mouseX < 0 ||\n          p.mouseX > p.width ||\n          p.mouseY < 0 ||\n          p.mouseY > p.height\n        )\n          return\n        const x = (p.mouseX - this.x) / this.scale + this.background.width / 2\n        const y = (p.mouseY - this.y) / this.scale + this.background.height / 2\n\n        const pointIndex = this.points.findIndex(\n          ({ x: px, y: py }) =>\n            x >= px - POINT_DIAMETER / 2 &&\n            x <= px + POINT_DIAMETER / 2 &&\n            y >= py - POINT_DIAMETER / 2 &&\n            y <= py + POINT_DIAMETER / 2\n        )\n        if (p.mouseButton === p.RIGHT && pointIndex !== -1) {\n          this.reactRemovePoint(pointIndex)\n        } else if (p.mouseButton === p.LEFT && this.isPinning) {\n          if (\n            x >= 0 &&\n            x <= this.background.width &&\n            y >= 0 &&\n            y <= this.background.height\n          ) {\n            this.reactAddPoint(x, y)\n          }\n        }\n\n        this.startX = p.mouseX\n        this.startY = p.mouseY\n\n        this.mousePressed = true\n      }\n\n      p.mouseReleased = () => {\n        this.mousePressed = false\n      }\n\n      p.mouseDragged = () => {\n        if (this.isPinning || !this.mousePressed) return\n        if (\n          p.mouseX < 0 ||\n          p.mouseX > p.width ||\n          p.mouseY < 0 ||\n          p.mouseY > p.height\n        )\n          return\n        const diffX = this.startX - p.mouseX\n        const diffY = this.startY - p.mouseY\n\n        this.x -= diffX\n        this.y -= diffY\n\n        this.startX = p.mouseX\n        this.startY = p.mouseY\n      }\n\n      p.mouseWheel = (e) => {\n        if (this.isPinning) return\n        if (\n          p.mouseX < 0 ||\n          p.mouseX > p.width ||\n          p.mouseY < 0 ||\n          p.mouseY > p.height\n        )\n          return\n        const { delta } = e\n        this.scale += delta / 1000\n      }\n\n      p.windowResized = () => {\n        p.resizeCanvas(container.offsetWidth, container.offsetHeight)\n      }\n    }\n\n    this.p5instance = new p5(this.sketch)\n  }\n\n  setPinning = (isPinning) => {\n    if (!this.p5instance) return\n\n    this.container.style.cursor = isPinning ? 'crosshair' : 'grab'\n    this.isPinning = isPinning\n  }\n\n  setAddPoint = (func) => (this.reactAddPoint = func)\n\n  setRemovePoint = (func) => (this.reactRemovePoint = func)\n\n  setPoints = (points) => (this.points = points)\n\n  getCornerPoints = () => {\n    const topLeft = this.points\n      .map((p) => ({\n        d: Math.sqrt(p.x ** 2 + p.y ** 2),\n        p\n      }))\n      .sort((a, b) => a.d - b.d)[0].p\n    const topRight = this.points\n      .map((p) => ({\n        d: Math.sqrt((p.x - this.background.width) ** 2 + p.y ** 2),\n        p\n      }))\n      .sort((a, b) => a.d - b.d)[0].p\n    const bottomLeft = this.points\n      .map((p) => ({\n        d: Math.sqrt(p.x ** 2 + (p.y - this.background.height) ** 2),\n        p\n      }))\n      .sort((a, b) => a.d - b.d)[0].p\n    const bottomRight = this.points\n      .map((p) => ({\n        d: Math.sqrt(\n          (p.x - this.background.width) ** 2 +\n            (p.y - this.background.height) ** 2\n        ),\n        p\n      }))\n      .sort((a, b) => a.d - b.d)[0].p\n\n    return { topLeft, topRight, bottomRight, bottomLeft }\n  }\n\n  project = async () => {\n    // const sortedPoints = this.points.sort(function (a, b) {\n    //   if (a.y === b.y) return a.x - b.x\n    //   return a.y - b.y\n    // })\n    let matrix, width, height\n\n    await new Promise((resolve) => {\n      const matrixWorker = new MatrixWorker()\n\n      matrixWorker.postMessage({\n        points: this.getCornerPoints()\n      })\n\n      matrixWorker.onmessage = (e) => {\n        matrix = e.data.matrix\n        width = e.data.width\n        height = e.data.height\n        resolve()\n      }\n    })\n\n    const { coeffsInv } = matrix\n\n    this.background.loadPixels()\n    const img = this.p5instance.createImage(\n      Math.floor(width),\n      Math.floor(height)\n    )\n    img.loadPixels()\n\n    for (let i = 0; i < img.width; i++) {\n      for (let j = 0; j < img.height; j++) {\n        const srcP = this.transformInverse(i, j, coeffsInv)\n        const color = this.background.get(\n          Math.floor(srcP.x),\n          Math.floor(srcP.y)\n        )\n        img.set(i, j, color)\n      }\n    }\n\n    img.updatePixels()\n\n    return img\n  }\n\n  transformInverse = (x, y, coeffsInv) => {\n    var coordinates = {}\n    coordinates.x =\n      (coeffsInv[0] * x + coeffsInv[1] * y + coeffsInv[2]) /\n      (coeffsInv[6] * x + coeffsInv[7] * y + 1)\n    coordinates.y =\n      (coeffsInv[3] * x + coeffsInv[4] * y + coeffsInv[5]) /\n      (coeffsInv[6] * x + coeffsInv[7] * y + 1)\n    return coordinates\n  }\n\n  drawLine = (p, p1, p2) => {\n    p.line(p1.x, p1.y, p2.x, p2.y)\n  }\n\n  mapPointToCanvas = (p) => {\n    return {\n      x: this.x + p.x * this.scale - (this.background.width * this.scale) / 2,\n      y: this.y + p.y * this.scale - (this.background.height * this.scale) / 2\n    }\n  }\n\n  terminate = () => {\n    if (this.p5instance) {\n      this.p5instance.remove()\n      this.p5instance = null\n    }\n  }\n\n  get enabled() {\n    return !!this.p5instance\n  }\n}\n","import {\n  Button,\n  Paragraph,\n  PlusIcon,\n  PrintIcon,\n  UploadIcon\n} from 'evergreen-ui'\nimport React, { useCallback, useEffect, useRef, useState } from 'react'\n\nimport ImageScanner from '../../core/ImageScanner'\n\nimport './Canvas.scss'\n\nconst MAX_POINTS = 4\n\nexport default ({ image, setImage, setResult, setLoading }) => {\n  const mount = useRef(null)\n  const inputRef = useRef(null)\n  const scannerRef = useRef(new ImageScanner())\n  const [isPinning, setIsPinning] = useState(false)\n  const [points, setPoints] = useState([])\n\n  const onImageInput = async (e) => {\n    if (e.target.files && e.target.files[0]) {\n      const reader = new FileReader()\n\n      reader.onload = function (e) {\n        setImage(() => e.target.result)\n      }\n\n      reader.readAsDataURL(e.target.files[0])\n    }\n  }\n\n  const addPoint = useCallback(\n    (x, y) => {\n      const newPoints = [...points, { x, y }]\n      setPoints(() => newPoints)\n\n      if (newPoints.length === MAX_POINTS) {\n        setIsPinning(false)\n      }\n    },\n    [points]\n  )\n\n  const removePoint = useCallback(\n    (index) => {\n      const newPoints = [...points]\n      newPoints.splice(index, 1)\n      setPoints(() => newPoints)\n      setIsPinning(true)\n    },\n    [points]\n  )\n\n  useEffect(() => {\n    if (!scannerRef.current.enabled && image)\n      scannerRef.current.setup(mount.current, image)\n  }, [mount, image])\n\n  useEffect(() => {\n    scannerRef.current.setAddPoint(addPoint)\n  }, [addPoint])\n\n  useEffect(() => {\n    scannerRef.current.setRemovePoint(removePoint)\n  }, [removePoint])\n\n  useEffect(() => {\n    scannerRef.current.setPoints(points)\n  }, [points])\n\n  useEffect(() => {\n    scannerRef.current.setPinning(isPinning)\n  }, [image, isPinning])\n\n  useEffect(() => {\n    document.body.addEventListener('keydown', (e) => {\n      if (e.key === 'Escape') setIsPinning(false)\n    })\n  })\n\n  return (\n    <div className=\"canvas-wrapper\">\n      <div\n        className=\"canvas-main\"\n        ref={mount}\n        onClick={() => {\n          if (image) return\n          inputRef.current.click()\n        }}\n      >\n        <input\n          ref={inputRef}\n          type=\"file\"\n          accept=\"image/png, image/jpeg\"\n          hidden\n          onChange={onImageInput}\n        />\n        {!image && (\n          <>\n            <UploadIcon size={100} color=\"#dbe2ef77\" />\n            <Paragraph color=\"#959ba577\" textAlign=\"center\" marginTop={10}>\n              Click to upload image\n            </Paragraph>\n          </>\n        )}\n        {image && (\n          <Paragraph className=\"canvas-hint\">\n            Scroll to zoom in/out, drag to pan.\n            <br />\n            Press \"Start Pinning\" and pin 4 points. Right click to unpin.\n          </Paragraph>\n        )}\n      </div>\n      <div className=\"canvas-toolbox\">\n        <Button\n          iconAfter={PlusIcon}\n          appearance=\"primary\"\n          intent=\"success\"\n          marginRight={8}\n          disabled={!image || points.length === MAX_POINTS}\n          height={40}\n          onClick={() => setIsPinning(!isPinning)}\n        >\n          {isPinning && MAX_POINTS !== points.length ? (\n            <span>Stop Pinning ({MAX_POINTS - points.length})</span>\n          ) : (\n            <span>Start Pinning ({MAX_POINTS - points.length})</span>\n          )}\n        </Button>\n        <Button\n          appearance=\"primary\"\n          intent=\"danger\"\n          disabled={points.length !== MAX_POINTS}\n          height={40}\n          iconAfter={PrintIcon}\n          onClick={async () => {\n            setLoading(true)\n            setResult(await scannerRef.current.project())\n            setLoading(false)\n          }}\n        >\n          Flatten\n        </Button>\n      </div>\n    </div>\n  )\n}\n","import p5 from 'p5'\n\nexport default class Result {\n  setup = (container, image) => {\n    this.terminate()\n\n    this.x = 0\n    this.y = 0\n    this.scale = 1\n    this.background = image\n\n    this.mousePressed = false\n\n    this.sketch = (p) => {\n      if (!image) return\n\n      this.background = image\n\n      p.setup = () => {\n        const myCanvas = p.createCanvas(\n          container.offsetWidth,\n          container.offsetHeight,\n          p.WEBGL\n        )\n\n        myCanvas.parent(container)\n        p.imageMode(p.CENTER)\n        p.noFill()\n      }\n\n      p.draw = () => {\n        if (!this.background) return\n\n        p.clear()\n        p.image(\n          this.background,\n          this.x,\n          this.y,\n          this.background.width * this.scale,\n          this.background.height * this.scale\n        )\n      }\n\n      p.mousePressed = () => {\n        if (\n          p.mouseX < 0 ||\n          p.mouseX > p.width ||\n          p.mouseY < 0 ||\n          p.mouseY > p.height\n        )\n          return\n\n        this.startX = p.mouseX\n        this.startY = p.mouseY\n\n        this.mousePressed = true\n      }\n\n      p.mouseReleased = () => {\n        this.mousePressed = false\n      }\n\n      p.mouseDragged = () => {\n        if (!this.mousePressed) return\n        if (\n          p.mouseX < 0 ||\n          p.mouseX > p.width ||\n          p.mouseY < 0 ||\n          p.mouseY > p.height\n        )\n          return\n\n        const diffX = this.startX - p.mouseX\n        const diffY = this.startY - p.mouseY\n\n        this.x -= diffX\n        this.y -= diffY\n\n        this.startX = p.mouseX\n        this.startY = p.mouseY\n      }\n\n      p.mouseWheel = (e) => {\n        if (\n          p.mouseX < 0 ||\n          p.mouseX > p.width ||\n          p.mouseY < 0 ||\n          p.mouseY > p.height\n        )\n          return\n        const { delta } = e\n        this.scale += delta / 1000\n      }\n\n      p.windowResized = () => {\n        p.resizeCanvas(container.offsetWidth, container.offsetHeight)\n      }\n    }\n\n    this.p5instance = new p5(this.sketch)\n  }\n\n  terminate = () => {\n    if (this.p5instance) {\n      this.p5instance.remove()\n    }\n  }\n}\n","import { Button, DownloadIcon } from 'evergreen-ui'\nimport React, { useEffect, useRef } from 'react'\n\nimport Result from '../../core/Result'\n\nimport './Result.scss'\n\nexport default ({ result }) => {\n  const mount = useRef(null)\n  const resultRef = useRef(new Result())\n\n  useEffect(() => {\n    if (result) resultRef.current.setup(mount.current, result)\n  }, [mount, result])\n\n  return (\n    <div className=\"result-wrapper\">\n      <div className=\"result-main\" ref={mount} />\n      <div className=\"result-toolbox\">\n        <Button\n          iconAfter={DownloadIcon}\n          appearance=\"primary\"\n          intent=\"warning\"\n          marginRight={8}\n          disabled={!result}\n          height={40}\n          onClick={() => {\n            result.save('result', 'png')\n          }}\n        >\n          Download\n        </Button>\n      </div>\n    </div>\n  )\n}\n","import React, { useState } from 'react'\nimport { BounceLoader } from 'react-spinners'\n\nimport './App.scss'\n\nimport BottomNav from '../components/BottomNav/BottomNav'\nimport Canvas from '../components/Canvas/Canvas'\nimport Result from '../components/Result/Result'\n\nfunction App() {\n  const [image, setImage] = useState('')\n  const [result, setResult] = useState(null)\n  const [loading, setLoading] = useState(false)\n\n  return (\n    <div className=\"app-wrapper\">\n      <div className=\"app-content\">\n        <Canvas\n          image={image}\n          setImage={setImage}\n          setResult={setResult}\n          setLoading={setLoading}\n        />\n        <Result result={result} />\n      </div>\n      <BottomNav />\n      <div\n        className=\"app-loader\"\n        style={{\n          visibility: loading ? 'visible' : 'hidden',\n          opacity: loading ? 1 : 0\n        }}\n      >\n        <BounceLoader size={100} color=\"white\" loading={true} />\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister()\n      })\n      .catch((error) => {\n        console.error(error.message)\n      })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport App from './containers/App'\nimport * as serviceWorker from './utils/serviceWorker'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}